<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workflow (1.1-beta) &mdash; MetaReForge Docs 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f2a433a1"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Workflow (1.0)" href="workflow_1_0.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MetaReForge Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow_1_0.html">Workflow (1.0)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Workflow (1.1-beta)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preliminary-setup">Preliminary Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scene-setup">Scene Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#import">1. Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-edit-meshes-edit-armature-and-other-auxiliary-objects">2. Creating Edit Meshes, Edit Armature, and Other Auxiliary Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#switch-between-object-groups">3. Switch Between Object Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-the-mesh">4. Editing the Mesh</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#editing-the-main-objects-skin-teeth-eyes">4.1. Editing the main objects (skin, teeth, eyes)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-transfer-defromation-from-one-edit-object-to-another-eyeshels-eyelashes-etc">4.2. How to transfer defromation from one edit object to another (eyeshels, eyelashes etc.)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#editing-in-third-party-application">4.3. Editing in third party application:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-the-armature">5. Editing the Armature</a></li>
<li class="toctree-l2"><a class="reference internal" href="#facial-expression-testing-using-control-rig-in-blender">6. Facial Expression Testing Using Control Rig in Blender</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initializing-the-controls">6.1. Initializing the Controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tuning-corrective-shape-keys-morph-targets">6.2. Tuning Corrective Shape Keys (Morph Targets)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#applying-changes-to-exportable-objects">7. Applying Changes to Exportable Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#synchronization-transferring-changes-to-the-exportable-objects">7.1. Synchronization (Transferring Changes to the Exportable Objects)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#re-computing-normals">7.2. Re-Computing Normals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#export">8. Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fbx">8.1. FBX</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dna">8.2. DNA</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MetaReForge Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Workflow (1.1-beta)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/workflow_1_1.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="workflow-1-1-beta">
<h1>Workflow (1.1-beta)<a class="headerlink" href="#workflow-1-1-beta" title="Link to this heading"></a></h1>
<p><strong>Currently, the documentation is under development.</strong></p>
<p>In update 1.1, MetaReForge has undergone a significant number of changes, therefore familiarizing yourself with this documentation is recommended even if you have confidently used version 1.0. Overall, we have tried to adhere to the same principles as in the development of version 1.0.
We’ve designed MetaReForge addon interface to be as clear and structured as possible. All features are organized into blocks within the N-panel under the ‘MRF’ category. The majority of these features are accessible in object mode, while additional utilities for armature editing become available in armature and mesh edit modes.</p>
<section id="preliminary-setup">
<h2>Preliminary Setup<a class="headerlink" href="#preliminary-setup" title="Link to this heading"></a></h2>
<p>First, we need to prepare the files for editing. You will need:</p>
<ol>
<li><p>The body’s FBX file. It is prefered to use a body skeletal mesh that includs all polygons, without any deleted polygons under the clothing.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Content/Metahumans/&lt;NAME&gt;/&lt;SEX&gt;/&lt;HEIGHT&gt;/&lt;WEIGHT&gt;/Body/&lt;BODY_SKELETAL_MESH&gt;</span></code></p></li>
<li><p>right-click on the corresponding skeletal mesh in the content browser Asset Actions - Export as FBX).</p></li>
</ul>
<a href="./images/export_as_fbx.png">
   <p align="center">
      <img src="./images/export_as_fbx.png" width="50%" height="50%"/>
   </p>
</a>  </li>
<li><p>The DNA file. It’s usually found in the Quixel Bridge asset folder. By default, look in</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C:\Users\&lt;USER_NAME&gt;\Documents\Megascans</span> <span class="pre">Library\Downloaded\UAssets\&lt;ASSET_ID&gt;\Tier0\asset_ue\MetaHumans\&lt;METAHUMAN_NAME&gt;\SourceAssets</span></code>).</p></li>
</ul>
<a href="./images/get_original_dna.png">
   <p align="center">
      <img src="./images/get_original_dna.png" width="50%" height="50%"/>
   </p>
</a></li>
<li><p>Optionaly you may use the head from FBX file. <strong>It is not recommended, but useful in certain cases listed in the <a class="reference external" href="#1-import">Import</a> section</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Content/Metahumans/&lt;METAHUMAN_NAME&gt;/Face/&lt;METAHUMAN_NAME&gt;_FaceMesh</span></code></p></li>
<li><p>right-click on the corresponding skeletal mesh in the content browser Asset Actions - Export as FBX).</p></li>
<li><p>Convert FBX with <a class="reference external" href="https://aps.autodesk.com/developer/overview/fbx-converter-archives">Autodesk FBX 2013 Converter</a>. Do not ignore this step because otherwise, some data, such as shape keys, will be lost! The converter is not supported on Windows 11.</p></li>
</ul>
</li>
</ol>
</section>
<section id="scene-setup">
<h2>Scene Setup<a class="headerlink" href="#scene-setup" title="Link to this heading"></a></h2>
<p>The first thing to do when opening a new scene in Blender is to set the units of measurement (this is necessary to match the units in Unreal Engine). The metric system should be selected with a Unit Scale = 0.01. If the units are not set up, the addon panel will display a <strong>Setup Scene</strong> button, which will configure the units as mentioned earlier.</p>
</section>
<section id="import">
<h2>1. Import<a class="headerlink" href="#import" title="Link to this heading"></a></h2>
<p>To import files, use the <strong>“Import”</strong> block on the N-panel of the addon (Object mode). Specify the path to the DNA file and the body FBX file. and click <strong>“Import”</strong>. The head mesh will be built from the DNA file. The import operation can take up to a few minutes. Afterwards, you will see two collections: “FBX_HEAD” and “FBX_BODY”. The objects that are created in these collections are intended for further export as FBX files. Unlike previous versions, in Metareforge 1.1 each LOD of the head is represented by several objects. This helps in more conveniently editing individual objects in third-party applications, as well as more accurately transferring changes from the editable object to the objects intended for export to UE (for more details on transferring changes, refer to <a class="reference external" href="#2-creating-edit-meshes-edit-armature-and-other-auxiliary-objects">section 2</a>).</p>
<p>If you want to import the head from FBX file you may untick “Build Head from DNA” and select head FBX file.
Importing the head FBX files is recommended only in a few situations:</p>
<ul class="simple">
<li><p>you are going to utilize your old edit meshes from Metareforge 1.0.X</p></li>
<li><p>you are going to edit a metahuman that has already been edited after importing it from Quixel Bridge.</p></li>
</ul>
<p>For all other cases, the “Build Head from DNA” option is preferred.</p>
<p><strong>Note.</strong> It’s not recommended to import FBX files in any other way. The addon removes unnecessary elements, analyzes LODs, and assigns them to the corresponding internal properties (which can be viewed by expanding the “Head Objects” and “Body Objects” drop-down lists).</p>
</section>
<section id="creating-edit-meshes-edit-armature-and-other-auxiliary-objects">
<h2>2. Creating Edit Meshes, Edit Armature, and Other Auxiliary Objects<a class="headerlink" href="#creating-edit-meshes-edit-armature-and-other-auxiliary-objects" title="Link to this heading"></a></h2>
<p>Once the FBX files are imported, we can proceed to initialize auxiliary and editable objects. For this, we move to the <strong>“Edit Shape”</strong> block.</p>
<p>There are two parameters available:</p>
<ul class="simple">
<li><p><strong>Weld Distance:</strong> Determines the distance (centimeters) at which the vertices of the meshes will be welded. The Weld Distance should be sufficient to weld all points at seams intended to be smooth, but at the same time, too large a Weld Distance value might cause other points to merge, making it impossible to apply the Surface Deform modifier, which is vital for subsequent processing. After initialization, you can preliminarily check the meshes for the most common issues that may arise during welding by clicking on the “Validate Edges” and “Validate Faces” buttons, which we will discuss a bit later in this section.</p></li>
<li><p><strong>Keep ShapeKeys:</strong> By default, this is turned on. You can turn it off to avoid storing shape key data for edit objects and to keep the blend file size manageable. However, in this case, you will not be able to edit corrective shape keys. Remember that the Metahuman LOD0 uses many corrective shape keys to achieve a more realistic appearance, and sometimes it’s necessary to adjust some of these shape keys as well as the base mesh.</p></li>
</ul>
<a href="./images/initialized.png">
  <p align="center">
    <img src="./images/initialized.png" width="35%" height="35%"/>
  </p>
</a><p>To ensure clarity, let’s review the terminology used in the addon:</p>
<ul class="simple">
<li><p><strong>Final Mesh:</strong> a mesh tailored for editing. When editing the entire body, the head and body are joined, and all seams are welded.</p></li>
<li><p><strong>Final Armature:</strong> an armature created for editing. If the entire body is edited, the head and body skeletons are merged into one, removing all duplicates.</p></li>
<li><p><strong>edit_id:</strong> a tag that links Edit Meshes with the corresponding objects from the FBX collections, which will be exported to Unreal Engine. It is also necessary for the automatic adjustment of bones. For example the changes from the Final Mesh with <code class="docutils literal notranslate"><span class="pre">edit_id=&quot;skin&quot;</span></code> will be transfered to the objects with <code class="docutils literal notranslate"><span class="pre">edit_id=&quot;skin&quot;</span></code> from FBX_HEAD collection. Similarly the teeth bones will use only the Final Mesh with tag <code class="docutils literal notranslate"><span class="pre">&quot;teeth&quot;</span></code> to adjust their location etc.</p></li>
</ul>
<p>Additionally, the add-on creates auxiliary Basis objects:</p>
<ul class="simple">
<li><p><strong>Basis Mesh:</strong> a mesh intended to store the original shape of the mesh.</p></li>
<li><p><strong>Basis Armature:</strong> the initial skeleton.</p></li>
</ul>
<p><strong>IMPORTANT:</strong> It is advised not to alter these objects unless absolutely necessary. In a standard workflow, these objects do not require any manual editing.</p>
<p>After clicking on “Initialize”, you will see the Final Armature and Basis Armature have already been assigned, as well as a list of various parts of the metahuman. By clicking on the arrow in each item of the list, you can select the Final Mesh for the corresponding body part. Expanding the ‘Item Details’, you can see the assigned Final and Basis meshes for each body part, as well as their edit_id. All these parameters are filled in automatically.</p>
</section>
<section id="switch-between-object-groups">
<h2>3. Switch Between Object Groups<a class="headerlink" href="#switch-between-object-groups" title="Link to this heading"></a></h2>
<p>Use the <strong>“View”</strong> block at the top of the menu to switch between LODs and editable objects.
<a href="./images/view.png"></p>
  <p align="center">
    <img src="./images/view.png" width="35%" height="35%"/>
  </p>
</a></section>
<section id="editing-the-mesh">
<h2>4. Editing the Mesh<a class="headerlink" href="#editing-the-mesh" title="Link to this heading"></a></h2>
<p>Once the auxiliary objects are initialized, you can start editing the mesh. Blender offers a wide range of editing capabilities, but if you need more, you can export the Final Mesh and edit it in an external editor.</p>
<p><strong>It’s crucial to remember:</strong></p>
<ul class="simple">
<li><p>The topology and vertex indexing must remain UNCHANGED.</p></li>
<li><p>Always disable symmetry when working in Edit Mode. At first glance, it may seem that it does not work anyway, but in reality, it sometimes snaps individual points, which can result in unwanted cavities or spikes.</p></li>
</ul>
<p>Even considering that there are now many different objects, this does not mean that each one needs to be manually edited.</p>
<section id="editing-the-main-objects-skin-teeth-eyes">
<h3>4.1. Editing the main objects (skin, teeth, eyes)<a class="headerlink" href="#editing-the-main-objects-skin-teeth-eyes" title="Link to this heading"></a></h3>
<p>We can recommend the following course of action:</p>
<ul class="simple">
<li><p>Position the eyes and the teeth meshes according to your sketch or simply where you, as an artist, see them fitting.</p></li>
<li><p>If you have moved the objects in Object Mode, don’t forget to apply the transformations (<code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">All</span> <span class="pre">Transforms</span></code>).
Next, in Sculpt Mode (enable x symmetry if you need), you can work on the skin model. I prefer to start with the Grab and Elastic Deform brushes at the initial stage. I recommend starting with sculpting because only then can you properly use symmetry. In Edit Mode, symmetry does not work as expected due to the fact that Metahuman has asymmetry.</p></li>
<li><p>By combining Edit Mode and Sculpt Mode, you can add more details.</p></li>
</ul>
<p>Then you need to transfer changes from skin and teeth to the other objects.</p>
</section>
<section id="how-to-transfer-defromation-from-one-edit-object-to-another-eyeshels-eyelashes-etc">
<h3>4.2. How to transfer defromation from one edit object to another (eyeshels, eyelashes etc.)<a class="headerlink" href="#how-to-transfer-defromation-from-one-edit-object-to-another-eyeshels-eyelashes-etc" title="Link to this heading"></a></h3>
<p>To transfer deformations, you need</p>
<ol class="simple">
<li><p>to select the necessary item from the list (<em><strong>action 1</strong></em>) to which you want to transfer the deformations.</p></li>
<li><p>Next, you need to set up the transfer. You can specify the basis and final objects manually or, as shown in the figure: enter the edit_id of the mesh from which the deformations will be transferred (<em><strong>action 2</strong></em>) and press the arrow button (<em><strong>action 3</strong></em>). If everything is specified correctly, then the basis and final objects should be determined automatically.</p></li>
<li><p>By default, the surface deform modifier will be used to transfer changes (in short, the vertices of the mesh will be attached to the closest polygons of the source mesh. <a class="reference external" href="https://docs.blender.org/manual/en/latest/modeling/modifiers/deform/surface_deform.html">Learn more</a>). In some cases, it may not work as well as desired, for example, it may warp or significantly stretch the shape of the original objects, so an option with enabling the Laplacian deform (<em><strong>action 4</strong></em>) has been added (in brief, this modifier keeps the anchor vertices in fixed positions and calculates the optimal locations of all the remaining vertices to preserve the original geometric details. <a class="reference external" href="https://docs.blender.org/manual/en/latest/modeling/modifiers/deform/laplacian_deform.html">Learn more</a>). In this case, points that are close (closer than “Lapl. Thresh.”, <em><strong>action 5</strong></em>) to the mesh from which the transformations are transferred will be transferred using surface deform (attached to the surface), and points that are further will be reconstructed using Laplacian deform. <strong>For example</strong>, when transferring deformations from the main body mesh to the eyelashes, the roots of the eyelashes will be attached to the nearest polygons on the eyelids, while the rest of the eyelash will not be directly attached to the body but will try to preserve the original shape of the eyelash as much as possible taking into account the new location of the eyelash root.</p></li>
<li><p>Click transfer (<em><strong>action 6</strong></em>)</p></li>
<li><p>Revise the changes after the transfer and fix minor problems.</p></li>
</ol>
<a href="./images/transfer_edit_shape.png">
  <p align="center">
    <img src="./images/transfer_edit_shape.png" width="35%" height="35%"/>
  </p>
</a><p>Despite the lengthy description, the process is simpler than it seems. <strong>The skin, teeth, and eyes are edited manually based on your artistic needs.</strong> The deformation is transferred to the other objects. For simplicity, we have compiled the following recommendations to help you quickly get oriented:</p>
<ol class="simple">
<li><p><strong>Saliva</strong> - Transfer the deformation from “teeth” with disabled Laplacian deform.</p></li>
<li><p><strong>Eyeshell</strong> - Transfer the deformation from “skin” with Laplacian Deform enabled (thresh &gt;= 0.01).</p></li>
<li><p><strong>Eyelashes</strong> - Transfer the deformation from “skin” with Laplacian Deform enabled (thresh &gt;= 0.1).</p></li>
<li><p><strong>Eye Edge, Cartilage</strong> - Transfer the deformation from “skin” with Laplacian Deform disabled.</p></li>
</ol>
</section>
</section>
<section id="editing-in-third-party-application">
<h2>4.3. Editing in third party application:<a class="headerlink" href="#editing-in-third-party-application" title="Link to this heading"></a></h2>
<p>If you wish to modify any part of the body in an external application, you will need to export the necessary Final Mesh and then, after editing, import it back into Blender and assign it in the ‘Final’ field for the corresponding body part. It’s important to ensure that the vertex order remains unchanged.</p>
</section>
<section id="editing-the-armature">
<h2>5. Editing the Armature<a class="headerlink" href="#editing-the-armature" title="Link to this heading"></a></h2>
<p>After achieving the desired mesh shape, it’s necessary to adjust the skeleton to these changes. The Metahuman skeleton contains about a thousand bones, and editing it manually is tedious and time-consuming. Therefore, our addon includes tools to simplify this routine by transferring the deformation from the final mesh to the skeleton.</p>
<p>To start editing the skeleton, you need to select it and switch to edit mode. If everything is done correctly, you will see the necessary tools in the MRF section on the N-panel.</p>
<p>We recommend using the automatic armature adjustment algorithm (<strong>Auto-Fit -&gt; Auto</strong>). <strong>Advanced Fit</strong> tab is more for non-metahuman skeletons and for handling problematic situations where the automatic algorithm does not work.</p>
</section>
<section id="facial-expression-testing-using-control-rig-in-blender">
<h2>6. Facial Expression Testing Using Control Rig in Blender<a class="headerlink" href="#facial-expression-testing-using-control-rig-in-blender" title="Link to this heading"></a></h2>
<a href="./images/face_ctrls.png">
  <p align="center">
    <img src="./images/face_ctrls.png" width="50%" height="50%"/>
  </p>
</a><p>Now, it’s possible to approximately test how facial animations will look in Unreal Engine directly in Blender. This significantly saves time, as importing into Unreal Engine takes a considerable amount of time.</p>
<p><strong>IMPORTANT TO UNDERSTAND:</strong></p>
<ul class="simple">
<li><p>This functionality is intended exclusively for testing facial animations with subsequent export of models to Unreal Engine.</p></li>
<li><p>The final facial expressions in Unreal Engine may differ slightly.</p></li>
<li><p>This solution is not optimized for real-time use.</p></li>
<li><p>The data required for the control rig to work is <strong>temporary</strong>. When loading a new blend file or restarting Blender, the control rig needs to be initialized again.</p></li>
</ul>
<section id="initializing-the-controls">
<h3>6.1. Initializing the Controls<a class="headerlink" href="#initializing-the-controls" title="Link to this heading"></a></h3>
<p>To initialize the control rig, open the <strong>MetaReforge.FaceControls</strong> menu on the N-panel and press the <strong>“Init Rig Logic”</strong> button. An Armature Object named <code class="docutils literal notranslate"><span class="pre">MRF_CTRL_RIG</span></code> will be created, through which control will be exercised similarly to the corresponding control rig in Unreal Engine. Clicking the <strong>“Edit Pose”</strong> button will enter you into Pose Mode for this object (this can also be done manually). Most controls work, but not all.
The recalculation of changes in bone positions, etc., requires a lot of resources, so it can be turned off when not needed by clicking the <strong>“Turn OFF Rig Logic”</strong> button and then, when necessary, re-enable calculations by clicking <strong>“Turn ON Rig Logic.”</strong></p>
</section>
<section id="tuning-corrective-shape-keys-morph-targets">
<h3>6.2. Tuning Corrective Shape Keys (Morph Targets)<a class="headerlink" href="#tuning-corrective-shape-keys-morph-targets" title="Link to this heading"></a></h3>
<p>For a setup of corrective shape keys, it’s necessary to identify the facial expression you wish to adjust. Then, in the <strong>“MetaReforge.FaceControls”</strong> menu, display all non-zero shape keys by clicking on the <strong>“Get nonzero shape keys”</strong> button (<em><strong>action 1</strong></em>), which lists all the non-zero shape keys for the given facial expression. When changing the facial expression, the button must be pressed again to refresh the information.</p>
<p>Next, click on the edit icon next to the selected shape key (<em><strong>action 2</strong></em>). After this, you will enter the editing mode for that particular shape key. Use the editing tools that are most convenient for you.</p>
<p>After completing the editing, you can return to the control rig (click the <strong>“Edit Pose”</strong> button) and check how the face animates with the updated shape key.</p>
<p><strong>IMPORTANT NOTE:</strong>
Metahumans use corrective shape keys only at LOD0.</p>
<a href="./images/corrective_sk.png">
  <p align="center">
    <img src="./images/corrective_sk.png" width="25%" height="25%"/>
  </p>
</a></section>
</section>
<section id="applying-changes-to-exportable-objects">
<h2>7. Applying Changes to Exportable Objects<a class="headerlink" href="#applying-changes-to-exportable-objects" title="Link to this heading"></a></h2>
<section id="synchronization-transferring-changes-to-the-exportable-objects">
<h3>7.1. Synchronization (Transferring Changes to the Exportable Objects)<a class="headerlink" href="#synchronization-transferring-changes-to-the-exportable-objects" title="Link to this heading"></a></h3>
<p>When the creative part of the work is completed, it’s necessary to transfer all changes to the exportable models. For this, we go to the <strong>“Update Original”</strong> block. By clicking on the <strong>“Synchronize”</strong> button, changes from the Final Mesh (more precisely, the difference between the Final Mesh and the Initial Mesh) will be applied to the individual LODs, and the updated position of the bones will also be applied to the original armature objects.</p>
<p>A few parameters are available for dealing with exceptional cases:</p>
<ul class="simple">
<li><p><strong>Use Noise:</strong> Default is True. It introduces a small amount of noise to the vertex positions at the time of binding. The Surface Deform modifier, which this operator is based on, fails to work if the vertex positions are identical. The noise value is usually extremely small, making its visual impact imperceptible, but it’s sufficient for the Surface Deform algorithm to bind successfully.</p></li>
<li><p><strong>Min, Max:</strong> The minimum and maximum values of the noise in centimeters. These should only be increased if synchronization fails with standard settings. However, I recommend trying to press <strong>Synchronize</strong> again or several times in case of failure. Due to the random nature of the process, there’s a good chance of achieving a noise configuration that allows smooth synchronization even without changing parameters.</p></li>
</ul>
<p>After applying the changes, you can review the results. For convenience, there is a <strong>“View”</strong> block at the top of the panel, where you can switch between LODs and editable objects. There may be minor imperfections, which can be corrected manually.</p>
</section>
<section id="re-computing-normals">
<h3>7.2. Re-Computing Normals<a class="headerlink" href="#re-computing-normals" title="Link to this heading"></a></h3>
<p>It’s important to pay attention to the seam between the head and body and also to the seams along the UV unwrap, as Metahuman actually has mesh splits at the UV seams. If sharp edges are noticeable, normals need to be recalculated, and we have developed a specific function for this.</p>
<p>After clicking on <strong>“Re-Compute Split Normals”</strong>, the following will occur:</p>
<ol class="simple">
<li><p>If Align Vertices is enabled, all points that are closer than the Weld Distance will be merged into one position.</p></li>
<li><p>Normals will be recalculated as if all seams are welded.</p></li>
</ol>
<p>With <strong>Weld Distance</strong> (in centimeters), you can control this process, but the default value is chosen to work in most cases. With a Weld Distance of more than 0.01, you might start to see points welding together that shouldn’t be.</p>
<p><strong>Remember</strong>, excessive Weld Distance can result in unintended merging of points, so it should be used cautiously.</p>
</section>
</section>
<section id="export">
<h2>8. Export<a class="headerlink" href="#export" title="Link to this heading"></a></h2>
<p>Once all LODs look as desired, it’s time to export them for use in Unreal Engine. Go to *<em>”Export”</em> block</p>
<section id="fbx">
<h3>8.1. FBX<a class="headerlink" href="#fbx" title="Link to this heading"></a></h3>
<p>Based on my experience, I prefer to export LODs separately because this way, you don’t have to spend a lot of time configuring Material Slots in Unreal Engine. Following this logic, we have a utility for exporting. You just need to specify the path (and the name if default is not OK) and click <strong>“Export FBX”</strong>. There’s no need to worry about settings, selecting the right objects, etc. Everything will be done for you. As a result, you should see 8 LODs for the head and 4 LODs for the body in the folder, so you can upload these files to Unreal Engine.</p>
</section>
<section id="dna">
<h3>8.2. DNA<a class="headerlink" href="#dna" title="Link to this heading"></a></h3>
<p>The Metahuman Animation blueprint heavily relies on the DNA file. Therefore, if you want your custom Metahuman to retain the ability to perform realistic facial animations, updating the DNA file is an ESSENTIAL step.
Note: If you don’t see the necessary functionality in the <strong>“DNA Update”</strong> block, check the Installation Guide.</p>
<p>All you need to do is:</p>
<ul class="simple">
<li><p>Make sure the path to the original DNA file is specified at the Import block.</p></li>
<li><p>Make sure the output path is specified (it uses the same directory as the FBX).</p></li>
<li><p>Click <strong>“Modify DNA”</strong>. MetaReForge will record the actual positions of the bones from Blender into the DNA file (Neutral Joint Translations and Rotations, following Epic Games’ terminology).</p></li>
<li><p>To assign the updated DNA file to a Metahuman in Unreal Engine, you need to drag and drop it into the Content Browser and select the relevant Skeletal Mesh.</p></li>
</ul>
<p>For troubleshooting, check out to our <a class="reference external" href="https://discord.gg/qYtEq2ukDX">Discord Server</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="workflow_1_0.html" class="btn btn-neutral float-left" title="Workflow (1.0)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sqeezy Pixels (Mykyta Petrenko).</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>